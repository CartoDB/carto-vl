<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Namespace: expressions</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Namespace: expressions</h1>

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="carto.html">carto</a>.</span>expressions</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Expressions are used to define visualizations, a visualization (viz) is a set named properties and variables and its corresponding values: expressions.
 A viz has the following properties:</p>
<ul>
<li><strong>color</strong>: fill color of points and polygons and color of lines</li>
<li><strong>strokeColor</strong>: stroke/border color of points and polygons, not applicable to lines</li>
<li><strong>width</strong>: fill diameter of points, thickness of lines, not applicable to polygons</li>
<li><strong>strokeWidth</strong>: stroke width of points and polygons, not applicable to lines</li>
<li><strong>filter</strong>: filter features by removing from rendering and interactivity all the features that don't pass the test.</li>
<li><strong>symbol</strong> - show an image instead in the place of points</li>
<li><strong>symbolPlacement</strong> - when using <code>symbol</code>, offset to apply to the image</li>
<li><strong>order</strong>: - rendering order of the features, only applicable to points. See <a href="carto.expressions.html#.asc">carto.expressions.asc</a>, <a href="carto.expressions.html#.desc">carto.expressions.desc</a> and <a href="carto.expressions.html#.noOrder">carto.expressions.noOrder</a></li>
<li><strong>resolution</strong>: - resolution of the property-aggregation functions, only applicable to points. Default resolution is 1. Custom values must be greater than 0 and lower than 256. A resolution of N means points are aggregated to grid cells NxN pixels. Unlinke <a href="https://carto.com/developers/torque-js/guides/how-spatial-aggregation-works/">Torque resolution</a>, the aggregated points are placed in the centroid of the cluster, not in the center of the grid cell.</li>
</ul>
<p>For example the point diameter could be using the <code>add</code> expression:</p>
<pre class="prettyprint source lang-javascript"><code>const viz = new carto.Viz({
  width: carto.expressions.add(5, 5)  // Equivalent to `width: 10`
});</code></pre><p>You can use dataset properties inside expressions. Imagine we are representing cities in a map,
we can make the point width proportional to the population using the <code>property</code>/<code>prop</code> expression.</p>
<pre class="prettyprint source lang-javascript"><code>const viz = new carto.Viz({
  width: carto.expressions.prop('population')
});</code></pre><p>Multiple expressions can be combined to form more powerful ones,
for example lets divide the population between a number using the <code>div</code> expression to make points smaller:</p>
<pre class="prettyprint source lang-javascript"><code>const s = carto.expressions; // We use this alias along documentation.
const viz = new carto.Viz({
  width: s.div(
    s.prop('population'),
    10000
 )
});</code></pre><p>All these expressions can be used also in a String API form. This API is a more compact way to create and use expressions.
It has shortcut notation to access your feature properties using the <code>$</code> symbol. It also allows inline comments using the JavaScript syntax.</p>
<pre class="prettyprint source lang-javascript"><code>const viz = new carto.Viz(`
  width: $population / 10000  // Size proportional to the population for each feature
`);</code></pre><p>Although the combination of expressions is very powerful, you must be aware of the different types to produce valid combinations.
For example, the previous example is valid since we assumed that 'population' is a numeric property, it won't be valid if
it was a categorical property. Each expression defines some restrictions regarding their parameters, particularly, the
type of their parameters.</p>
<p>The most important types are:</p>
<ul>
<li><strong>Number</strong> expression. Expressions that contains numbers, both integers and floating point numbers. Boolean types are emulated by this type, being 0 false, and 1 true.</li>
<li><strong>Category</strong> expression. Expressions that contains categories. Categories can have a limited set of values, like the country or the region of a feature.</li>
<li><strong>Color</strong> expression. Expressions that contains colors. An alpha or transparency channel is included in this type.</li>
</ul></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".palettes"><span class="type-signature">(static) </span>palettes<span class="type-signature"></span></h4>




<div class="description">
    <p>Color palettes.</p>
<p>Palettes are constants that allow to use <a href="https://carto.com/carto-colors/">CARTOColors</a> and <a href="https://github.com/axismaps/colorbrewer/">ColorBrewer</a> palettes easily.
Use them with a <a href="carto.expressions.html#.ramp">ramp</a>.</p>
<p>The following palettes are available in the namespace <a href="carto.expressions.html">carto.expressions</a>.</p>
<pre class="prettyprint source"><code> BURG, BURGYL, REDOR, ORYEL, PEACH, PINKYL, MINT, BLUGRN, DARKMINT, EMRLD, AG_GRNYL, BLUYL, TEAL, TEALGRN,
 PURP, PURPOR, SUNSET, MAGENTA, SUNSETDARK, AG_SUNSET, BRWNYL, ARMYROSE, FALL, GEYSER, TEMPS, TEALROSE, TROPIC,
 EARTH, ANTIQUE, BOLD, PASTEL, PRISM, SAFE, VIVID, CB_YLGN, CB_YLGNBU, CB_GNBU, CB_BUGN, CB_PUBUGN, CB_PUBU,
 CB_BUPU, CB_RDPU, CB_PURD, CB_ORRD, CB_YLORRD, CB_YLORBR, CB_PURPLES, CB_BLUES, CB_GREENS, CB_ORANGES, CB_REDS,
 CB_GREYS, CB_PUOR, CB_BRBG, CB_PRGN, CB_PIYG, CB_RDBU, CB_RDGY, CB_RDYLBU, CB_SPECTRAL, CB_RDYLGN, CB_ACCENT,
 CB_DARK2, CB_PAIRED, CB_PASTEL1, CB_PASTEL2, CB_SET1, CB_SET2, CB_SET3</code></pre>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





    <h5>Examples</h5>
    
        <p class="code-caption">Using a color scheme.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.prop('type'), s.palettes.PRISM);
});</code></pre>

        <p class="code-caption">Using a color scheme. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp($type, PRISM)
`);</code></pre>



        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".abs"><span class="type-signature">(static) </span>abs<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the absolute value of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the absolute value</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Abs.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.abs(-100)  // 100
});</code></pre>

        <p class="code-caption">Abs. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: abs(-100) // 100
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".add"><span class="type-signature">(static) </span>add<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number|Color}</span></h4>
    

    



<div class="description">
    <p>Add two numeric expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>First value to add</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Second value to add</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the addition</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number addition.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.add(10, 2)  // 12
});</code></pre>

        <p class="code-caption">Number addition. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 10 + 2  // Equivalent to add(10, 2)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".alphaNormalize"><span class="type-signature">(static) </span>alphaNormalize<span class="signature">(input, normalizer)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Override the opacity (alpha channel) of a color to normalize the input color by a normalizer property.</p>
<p>This is implemented as `opacity(input, normalizer/globalMax(normalizer))</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>input color to normalize</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>normalizer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric property that will be used to normalize the input color</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Normalize an input property ($winner_party) by a second property ($voters).</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.alphaNormalize(
             s.ramp(s.prop('winner_party'), [red, blue]),
             s.prop('voters')
         )
});</code></pre>

        <p class="code-caption">Normalize an input property ($winner_party) by a second property ($voters). (String)</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: alphaNormalize(
             ramp($winner_party, [red, blue]),
             $voters
         )
});</code></pre>



        
            

    

    
    <h4 class="name" id=".and"><span class="type-signature">(static) </span>and<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Perform a binary AND between two numeric expressions.
If the numbers are different from 0 or 1 this performs a <a href="https://en.wikipedia.org/wiki/Fuzzy_logic#Fuzzification">fuzzy and operation</a>.
This fuzzy behavior will allow transitions to work in a continuos, non-discrete, fashion.</p>
<p>This returns a number expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>First value of the expression</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the expression</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Show only elements with price < 30 AND category === 'fruit'.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.and(
    s.lt(s.prop('price'), 30),
    s.eq(s.prop('category'), 'fruit')
  )
});</code></pre>

        <p class="code-caption">Show only elements with price < 30 AND category === 'fruit'. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price &lt; 30 and $category === 'fruit'  // Equivalent to and(lt($price, 30), eq($category, 'fruit'))
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".animation"><span class="type-signature">(static) </span>animation<span class="signature">(input, duration, fade)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Create an animated temporal filter (animation). Read more about the Animation Class</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>input to base the temporal filter,
if input is a property, the beginning and end of the animation will be determined by the minimum and maximum timestamps of the property on the dataset,
this can be problematic if outliers are present. Otherwise input must be a number expression in which 0 means beginning of the animation and 1 means end.
If <code>input</code> is NULL or NaN the filter won't be passed at any moment of the animation.</p>
<p>It can be combined with linear and time expressions.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>duration</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>duration of the animation in seconds, optional, defaults to 10 seconds</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fade</code></td>
            

            <td class="type">
            
                
<span class="param-type">Fade</span>


            
            </td>

            

            

            <td class="description last"><p>fadeIn/fadeOut configuration, optional, defaults to 0.15 seconds of fadeIn and 0.15 seconds of fadeOut</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Temporal map by $day (of numeric type), with a duration of 40 seconds, fadeIn of 0.1 seconds and fadeOut of 0.3 seconds.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: 2,
  color: s.ramp(s.linear(s.clusterAvg(s.prop('temp'), 0, 30)), s.palettes.TEALROSE),
  filter: s.animation(s.prop('day'), 40, s.fade(0.1, 0.3))
});</code></pre>

        <p class="code-caption">Temporal map by $day (of numeric type), with a duration of 40 seconds, fadeIn of 0.1 seconds and fadeOut of 0.3 seconds. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 2
  color: ramp(linear(clusterAvg($temp), 0,30), tealrose)
  filter: animation($day, 40, fade(0.1, 0.3))
`);</code></pre>

        <p class="code-caption">Temporal map by $date (of date type), with a duration of 40 seconds, fadeIn of 0.1 seconds and fadeOut of 0.3 seconds.</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz({
  width: 2,
  color: s.ramp(s.linear(s.clusterAvg(s.prop('temp'), 0, 30)), s.palettes.TEALROSE),
  filter: s.animation(s.linear(s.prop('date'), s.time('2022-03-09T00:00:00Z'), s.time('2033-08-12T00:00:00Z')), 40, s.fade(0.1, 0.3))
});</code></pre>

        <p class="code-caption">Temporal map by $date (of date type), with a duration of 40 seconds, fadeIn of 0.1 seconds and fadeOut of 0.3 seconds. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 2
  color: ramp(linear(clusterAvg($temp), 0,30), tealrose)
  filter: animation(linear($date, time('2022-03-09T00:00:00Z'), time('2033-08-12T00:00:00Z')), 40, fade(0.1, 0.3))
`);
Animation class

This class is instanced automatically by using the `animation` function. It is documented for its methods.</code></pre>



        
            

    

    
    <h4 class="name" id=".asc"><span class="type-signature">(static) </span>asc<span class="signature">(input)</span><span class="type-signature"> &rarr; {Order}</span></h4>
    

    



<div class="description">
    <p>Order ascending input a provided expression. NOTE: only works with <code>width()</code>.</p>
<p>Note: ordering expressions won't assure a perfect ordering.
Features will be distributed in different buckets with the original order, and those buckets will be ordered.
This guarantees a maximum error, but not a perfect order.
For most operations this is imperceptible, but usage of <code>order</code> in combination with animation or multi-scale expressions (<code>zoomrange</code> and <code>scaled</code>)
may result in artifacts.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">carto.expressions.Width</span>


            
            </td>

            

            

            <td class="description last"><p>must be <code>width()</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Order</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Ascending order based on width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  order: s.asc(s.width())
});</code></pre>

        <p class="code-caption">Ascending order based on width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  order: asc(width())
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".between"><span class="type-signature">(static) </span>between<span class="signature">(input, lowerLimit, upperLimit)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Check if a given value is contained within an inclusive range (including the limits).</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression that is going to be tested against the [lowerLimit, upperLimit] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lowerLimit</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression with the lower limit of the range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>upperLimit</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression with the upper limit of the range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression with the result of the check</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display only cities where the population density is within the [50,100] range.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.between(s.prop('dn'), 50, 100);
});</code></pre>

        <p class="code-caption">Display only cities where the population density is within the [50,100] range. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: between($dn, 50, 100)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".blend"><span class="type-signature">(static) </span>blend<span class="signature">(a, b, mix)</span><span class="type-signature"> &rarr; {Number|Color}</span></h4>
    

    



<div class="description">
    <p>Linearly interpolate from <code>a</code> to <code>b</code> based on <code>mix</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric or color expression, <code>a</code> type must match <code>b</code> type</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>b</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric or color expression, <code>b</code> type must match <code>a</code> type</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mix</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression with the interpolation parameter in the [0,1] range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric or color expression with the same type as <code>a</code> and <code>b</code></p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Blend based on the zoom level to display a bubble map at high zoom levels and display fixed-sized points at low zoom levels.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.blend(3,
                 s.prop('dn'),
                 s.linear(s.zoom(), 10, 14))
          );
});</code></pre>

        <p class="code-caption">Blend based on the zoom level to display a bubble map at high zoom levels and display fixed-sized points at low zoom levels. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: blend(3,
               $dn,
               linear(zoom(), 10, 14)
         )
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".buckets"><span class="type-signature">(static) </span>buckets<span class="signature">(property, breakpoints, othersLabel)</span><span class="type-signature"> &rarr; {Number|Category}</span></h4>
    

    



<div class="description">
    <p>Given a property create &quot;sub-groups&quot; based on the given breakpoints.</p>
<p>This returns a number or category expression depending on the input values. The &quot;others&quot; label is by default CARTO_VL_OTHERS.
This can be overwriten by setting the &quot;others&quot; label as the third parameter.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>The property to be evaluated and interpolated</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>breakpoints</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Number></span>
|

<span class="param-type">Array.&lt;Category></span>


            
            </td>

            

            

            <td class="description last"><p>Expression containing the different breakpoints.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>othersLabel</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Custom label for &quot;others&quot;</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display a traffic dataset in 4 colors depending on the numeric speed.</p>
    
    <pre class="prettyprint"><code>// Using the buckets `expression` we divide the dataset into 4 buckets according to the speed
// - From -inf to 29
// - From 30 to 79
// - From 80 to 119
// - From 120 to +inf
// Values lower than 0 will be in the first bucket and values higher than 120 will be in the last one.
const s = carto.expressions;
const viz = new carto.Viz({
   color: s.ramp(
     s.buckets(s.prop('speed'), [30, 80, 120]),
     s.palettes.PRISM
   )
});</code></pre>

        <p class="code-caption">Display a traffic dataset in 4 colors depending on the numeric speed. (String)</p>
    
    <pre class="prettyprint"><code>// Using the buckets `expression` we divide the dataset into 4 buckets according to the speed
// - From -inf to 29
// - From 30 to 79
// - From 80 to 119
// - From 120 to +inf
// Values lower than 0 will be in the first bucket and values higher than 120 will be in the last one.
const viz = new carto.Viz(`
   color: ramp(buckets($speed, [30, 80, 120]), PRISM)
`);</code></pre>

        <p class="code-caption">Display a traffic dataset is 3 colors depending on the category procesedSpeed.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(
    s.buckets(s.prop('procesedSpeed'), ['slow', 'medium', 'high']),
    s.palettes.PRISM)
  )
});</code></pre>

        <p class="code-caption">Display a traffic dataset is 3 colors depending on the category procesedSpeed. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
   color: ramp(buckets($procesedSpeed, ['slow', 'medium', 'high']), PRISM)
`);</code></pre>

        <p class="code-caption">Set custom "others" label.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(
    s.buckets(s.prop('procesedSpeed'), ['slow', 'medium', 'high'], 'Others'),
    s.palettes.PRISM)
  )
});</code></pre>

        <p class="code-caption">Set custom "others" label. (String)</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz(`
   color: ramp(buckets($procesedSpeed, ['slow', 'medium', 'high'], 'Others'), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".categoryIndex"><span class="type-signature">(static) </span>categoryIndex<span class="signature">(property)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Transform a categorical property into a per-property category index. The evaluated result returns a value between 0 and 1.
The dataset must contain less than 65536 (256 * 256) different categories.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>The property to be evaluated, must be categorical</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption"> Color by $city using the CARTOColor Prism by assigning different color in Prism to each category.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.categoryIndex(s.prop('city')), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption"> Color by $city using the CARTOColor Prism by assigning different color in Prism to each category. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(categoryIndex($city), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".ceil"><span class="type-signature">(static) </span>ceil<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the ceil of the given expression.
Find the nearest integer that is greater than or equal to the expression value.</p>
<ul>
<li>When x is equal to 0.8 ceil(x) will be evaluated to 1</li>
<li>When x is equal to 1.3 ceil(x) will be evaluated to 2</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Number to compute the ceil value</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Ceil.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.ceil(5.1);  // 6
});</code></pre>

        <p class="code-caption">Ceil. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: ceil(5.1)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".cielab"><span class="type-signature">(static) </span>cielab<span class="signature">(l, a, b)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a CIELab color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>l</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The lightness of the color</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The green–red color component</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>b</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The blue–yellow color component</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.cielab(32.3, 79.2, -107.86)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: cielab(32.3, 79.2, -107.86)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterAvg"><span class="type-signature">(static) </span>clusterAvg<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Aggregate using the average. This operation disables the access to the property
except within other cluster aggregate functions.</p>
<p>Note: <code>clusterAvg</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be aggregated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Aggregated column</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster average of the population as width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.clusterAvg(s.prop('population'))
});</code></pre>

        <p class="code-caption">Use cluster average of the population as width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: clusterAvg($population)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterCount"><span class="type-signature">(static) </span>clusterCount<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Count of features per cluster.</p>
<p>The <code>clusterCount</code> expression has no input parameters and if data is not aggregated, it always returns 1.
It is not possible to use it as an input in global aggregations such as <code>globalMin</code> or <code>globalQuantiles</code>.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Cluster feature count</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster count for width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.clusterCount() / 50
});</code></pre>

        <p class="code-caption">Use cluster count for width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: clusterCount() / 50
`);</code></pre>

        <p class="code-caption">Use cluster count with viewportQuantiles in a ramp for width and color.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.viewportQuantiles(s.clusterCount(), 5), [1, 20])
  width: s.ramp(s.viewportQuantiles(s.clusterCount(), 5), s.palettes.PINKYL))
});
// Note: this is not possible with globalQuantiles</code></pre>

        <p class="code-caption">Use cluster count with viewportQuantiles in a ramp for width and color. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: ramp(viewportQuantiles(clusterCount(), 5), [1, 20])
  color: ramp(viewportQuantiles(clusterCount(), 5), Pinkyl)
`);
// Note: this is not possible with globalQuantiles</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterMax"><span class="type-signature">(static) </span>clusterMax<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Aggregate using the maximum. This operation disables the access to the property
except within other cluster aggregate functions.</p>
<p>Note: <code>clusterMax</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be aggregated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Aggregated column</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster maximum of the population as width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.clusterMax(s.prop('population'))
});</code></pre>

        <p class="code-caption">Use cluster maximum of the population as width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: clusterMax($population)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterMin"><span class="type-signature">(static) </span>clusterMin<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Aggregate using the minimum. This operation disables the access to the property
except within other cluster aggregate functions.</p>
<p>Note: <code>clusterMin</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be aggregated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Aggregated column</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster minimum of the population as width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.clusterMin(s.prop('population'))
});</code></pre>

        <p class="code-caption">Use cluster minimum of the population as width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: clusterMin($population)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterMode"><span class="type-signature">(static) </span>clusterMode<span class="signature">(property)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Aggregate using the mode. This operation disables the access to the property
except within other cluster aggregate functions.</p>
<p>Note: <code>clusterMode</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be aggregated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Aggregated column</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster mode of the population in a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.clusterMode(s.prop('category')), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption">Use cluster mode of the population in a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(clusterMode($category), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterSum"><span class="type-signature">(static) </span>clusterSum<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Aggregate using the sum. This operation disables the access to the property
except within other cluster aggregate functions.</p>
<p>Note: <code>clusterSum</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be aggregated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Aggregated column</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use cluster sum of the population as width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.clusterSum(s.prop('population'))
});</code></pre>

        <p class="code-caption">Use cluster sum of the population as width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: clusterSum($population)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".clusterTime"><span class="type-signature">(static) </span>clusterTime<span class="signature">(property, units, timezone)</span><span class="type-signature"> &rarr; {TimeRange|Number}</span></h4>
    

    



<div class="description">
    <p>Use discretised property as aggregate dimension. This operation disables the access to the property
except within <code>clusterTime</code> expressions with the same parameters.</p>
<p>Note: <code>clusterTime</code> can only be created with a <a href="carto.expressions.html#.prop">carto.expressions.prop</a>,
as the first parameter, not other expressions.</p>
<p>When the units of resolution are cyclic periods such as 'dayOfWeek' (day of the week) or 'monthOfYear' (month of the year),
the resulting expression takes a numeric value to represent the period, e.g. 1 for Monday or January.</p>
<p>When the units are not cyclic (e.g. 'week' or 'month'), the resulting expression is a <code>TimeRange</code> that
encompass each individual calendar period, for example week 2018-W03 (third week of 2018 from 2018-01-15 to 2018-01-21)
or 2018-03 (March 2018, from 2018-03-01 to 2018-04-01).</p>
<p>Accepted values for cyclic resolution periods are:</p>
<ul>
<li><code>semesterOfYear</code> (6-month term) takes values from 1 to 2</li>
<li><code>trimesterOfYear</code> (4-month term) takes values from 1 to 3</li>
<li><code>quarterOfYear</code> (3-month term) takes values from 1 to 4</li>
<li><code>monthOfYear</code> takes values from 1 (January) to 12 (December)</li>
<li><code>weekOfYear</code> follows <a href="https://en.wikipedia.org/wiki/ISO_week_date">ISO 8601 numbering</a> taking values from 1 up to 53</li>
<li><code>dayOfWeek</code> (as per ISO 8601, 1 = Monday, to 7 = Sunday</li>
<li><code>dayOfMonth</code> takes values from 1 to 31</li>
<li><code>dayOfYear</code> takes values from 1 to 366</li>
<li><code>hourOfDay</code> takes values from 0 to 23</li>
<li><code>minuteOfHour</code> takes values from 0 to 59</li>
</ul>
<p>Accepted values for serial resolution units are:</p>
<ul>
<li><code>year</code>, e.g. '2017'</li>
<li><code>month</code>, e.g. '2017-03'</li>
<li><code>day</code>, e.g. '2017-03-01'</li>
<li><code>hour</code>, e.g. '2017-03-01T13'</li>
<li><code>minute</code>, e.g. '2017-03-01T13:22'</li>
<li><code>second</code>, e.g. '2017-03-01T13:22:31'</li>
<li><code>week</code> represented as '2018-W03' (third week of 2018:, 2018-01-15 to 2018-01-21)</li>
<li><code>quarter</code> as '2018-Q2' (second quarter of 2018, i.e. 2018-04 to 2018-06)</li>
<li><code>semester</code> as '2018S2' (second semester of 2018, i.e. 2018-07 to 2018-12)</li>
<li><code>trimester</code> as '2018t2' (second trimester of 2018, i.e. 2018-05 to 2018-08)</li>
<li><code>decade</code> as 'D201' (decade 201, i.e. 2010 to 2019)</li>
<li><code>century</code> as 'C21' (21st century, ie. 2001 to 2100)</li>
<li><code>millennium</code> as 'M3' (3rd millennium: 2001 to 3000)</li>
</ul>
<p>The time zone is optional. By default UTC time will be used.
It admits a fixed offset from UTC as a signed number of seconds,
or <a href="https://www.iana.org/time-zones">IANA</a> timezone <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">names</a>
such as <code>America/New_York</code> or <code>Europe/Madrid</code>, which not only define a time offset,
but also rules for DST (daylight savings time).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table to be discretised as dimension</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>units</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Units of resolution for the discretization</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timezone</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Time zone in which the dates are discretised. UTC by default.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Dimension column; takes time range values (intervals) for serial units of resolutions and numbers for recurrent units.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">TimeRange</span>
|

<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use months as a dimension of the cluster aggregations as `month`.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  month: s.clusterTime(s.prop('date', 'month', 'America/New_York'))
});</code></pre>

        <p class="code-caption">Use months as a dimension of the cluster aggregations as `month`. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  month: clusterTime($date, 'month', 'America/New_York')
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".constant"><span class="type-signature">(static) </span>constant<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Wraps a constant number. Implies a GPU optimization vs number expression.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>A number to be warped in a constant numeric expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Creating a constant number expression.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.constant(15)
});</code></pre>

        <p class="code-caption">Creating a constant number expression. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: constant(15)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".cos"><span class="type-signature">(static) </span>cos<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the cosine of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the cosine in radians</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Cos.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.cos(0)  // 1
});</code></pre>

        <p class="code-caption">Cos. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: cos(0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".desc"><span class="type-signature">(static) </span>desc<span class="signature">(input)</span><span class="type-signature"> &rarr; {Order}</span></h4>
    

    



<div class="description">
    <p>Order descending input a provided expression. NOTE: only works with <code>width()</code>.</p>
<p>Note: ordering expressions won't assure a perfect ordering.
Features will be distributed in different buckets with the original order, and those buckets will be ordered.
This guarantees a maximum error, but not a perfect order.
For most operations this is imperceptible, but usage of <code>order</code> in combination with animation or multi-scale expressions (<code>zoomrange</code> and <code>scaled</code>)
may result in artifacts.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">carto.expressions.Width</span>


            
            </td>

            

            

            <td class="description last"><p>must be <code>width()</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Order</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Descending order based on width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  order: s.desc(s.width())
});</code></pre>

        <p class="code-caption">Descending order based on width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  order: desc(width())
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".div"><span class="type-signature">(static) </span>div<span class="signature">(numerator, denominator)</span><span class="type-signature"> &rarr; {Number|Color}</span></h4>
    

    



<div class="description">
    <p>Divide two numeric expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>numerator</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Numerator of the division</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>denominator</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Denominator of the division</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the division</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number division.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.div(10, 2)  // 5
});</code></pre>

        <p class="code-caption">Number division. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 10 / 2  // Equivalent to div(10, 2)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".eq"><span class="type-signature">(static) </span>eq<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is equal to a y.</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price equal to 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.eq(s.prop('price'), 30)
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price equal to 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price == 30  // Equivalent to eq($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".fade"><span class="type-signature">(static) </span>fade<span class="signature">(param1, param2)</span><span class="type-signature"> &rarr; {Fade}</span></h4>
    

    



<div class="description">
    <p>Create a FadeIn/FadeOut configuration. See <code>animation</code> for more details.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>param1</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Expression of type number or Number</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>param2</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Expression of type number or Number</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Fade</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Fade in of 0.1 seconds, fade out of 0.3 seconds.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.animation(s.prop('day'), 40, s.fade(0.1, 0.3))
});</code></pre>

        <p class="code-caption">Fade in of 0.1 seconds, fade out of 0.3 seconds. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: animation($day, 40, fade(0.1, 0.3))
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".floor"><span class="type-signature">(static) </span>floor<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the floor of the given expression.
Find the nearest integer less than or equal to the expression value.</p>
<ul>
<li>When x is equal to 0.8 floor(x) will be evaluated to 0</li>
<li>When x is equal to 1.3 floor(x) will be evaluated to 1</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Number to compute the floor value</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Floor.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.floor(5.9)  // 5
});</code></pre>

        <p class="code-caption">Floor. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: floor(5.9)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalAvg"><span class="type-signature">(static) </span>globalAvg<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the average of the feature property for the entire source data.</p>
<p>Note: <code>globalAvg</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>property expression of number type</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the global average of the `amount` property to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     g_avg: s.globalAvg(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the global average of the `amount` property to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @g_avg: globalAvg($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalCount"><span class="type-signature">(static) </span>globalCount<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the feature count for the entire source data.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>feature count</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the global count of features to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     g_count: s.globalCount()
  }
});</code></pre>

        <p class="code-caption">Assign the global count of features. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @g_count: globalCount()
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalEqIntervals"><span class="type-signature">(static) </span>globalEqIntervals<span class="signature">(input, n)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the equal intervals method with <code>n</code> buckets.</p>
<p>It will classify the input based on the entire dataset without filtering by viewport or by <code>filter</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The input expression to classify</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Number of buckets</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use global equal intervals to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.globalEqIntervals(s.prop('density'), 5), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption">Use global equal intervals to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(globalEqIntervals($density, 5), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalHistogram"><span class="type-signature">(static) </span>globalHistogram<span class="signature">(input, sizeOrBuckets)</span><span class="type-signature"> &rarr; {GlobalHistogram}</span></h4>
    

    



<div class="description">
    <p>Generates a histogram based on a representative sample of the data.</p>
<p>The histogram can be based on a categorical expression, in which case each category will correspond to a histogram bar.</p>
<p>The histogram can be based on a numeric expression, the buckets for the histogram is controllable through the <code>sizeOrBuckets</code> parameter.
For numeric values of sizeOrBuckets, the minimum and maximum will be computed automatically and bars will be generated at regular intervals between the minimum and maximum.
When providing sizeOrBuckets as a list of buckets, the values will get assigned to the first bucket matching the criteria [bucketMin &lt;= value &lt; bucketMax].</p>
<p>The globalHistogram can also be combined with the <code>top()</code> expression.</p>
<p>Histograms are useful to get insights and create widgets outside the scope of CARTO VL, see the following example for more info.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>expression to base the histogram</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sizeOrBuckets</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>Optional (defaults to 20). Number of bars to use if <code>x</code> is a numeric expression; or user-defined buckets for numeric expressions.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>GlobalHistogram</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">GlobalHistogram</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Create and use an histogram.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz(
    variables: {
      categoryHistogram: s.globalHistogram(s.prop('type')),
      numericHistogram: s.globalHistogram(s.prop('amount'), 3, 1),
      userDefinedHistogram: s.globalHistogram(s.prop('amount', [[0, 10], [10, 20], [20, 30]], 1),
      topCategoryHistogram: s.globalHistogram(s.top(s.prop('type'), 3))
    }
);
// ...
console.log(viz.variables.categoryHistogram.value);
// [{x: 'typeA', y: 10}, {x: 'typeB', y: 20}]
// There are 10 features of type A and 20 of type B

console.log(viz.variables.numericHistogram.value);
// [{x: [0,10],  y: 20}, {x: [10,20],  y: 7}, {x: [20, 30], y: 3}]
// There are 20 features with an amount between 0 and 10, 7 features with an amount between 10 and 20, and 3 features with an amount between 20 and 30</code></pre>

        <p class="code-caption">Create and use an histogram. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
   @categoryHistogram:    globalHistogram($type)
   @numericHistogram:     globalHistogram($amount, 3, 1)
   @userDefinedHistogram: globalHistogram($amount, [[0, 10], [10, 20], [20, 30]], 1)
   @topCategoryHistogram: globalHistogram(top($type, 3))
`);
// ...
console.log(viz.variables.categoryHistogram.value);
// [{x: 'typeA', y: 10}, {x: 'typeB', y: 20}]
// There are 10 features of type A and 20 of type B

console.log(viz.variables.numericHistogram.value);
// [{x: [0,10],  y: 20}, {x: [10,20],  y: 7}, {x: [20, 30], y: 3}]
// There are 20 features with an amount between 0 and 10, 7 features with an amount between 10 and 20, and 3 features with an amount between 20 and 30</code></pre>



        
            

    

    
    <h4 class="name" id=".globalMax"><span class="type-signature">(static) </span>globalMax<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number|Date}</span></h4>
    

    



<div class="description">
    <p>Return the maximum of the feature property for the entire source data.</p>
<p>Note: <code>globalMax</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last"><p>property expression of date or number type</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the global maximum of the `amount` property to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     g_max: s.globalMax(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the global maximum of the `amount` property to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @g_max: globalMax($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalMin"><span class="type-signature">(static) </span>globalMin<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number|Date}</span></h4>
    

    



<div class="description">
    <p>Return the minimum of the feature property for the entire source data.</p>
<p>Note: <code>globalMin</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            

            

            <td class="description last"><p>property expression of date or number type</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the global minimum of the `amount` property to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     g_min: s.globalMin(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the global minimum of the `amount` property to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @g_min: globalMin($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalPercentile"><span class="type-signature">(static) </span>globalPercentile<span class="signature">(property, percentile)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the Nth percentile of an numeric property for the entire source data.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric property</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>percentile</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression in the [0, 100] range, must be feature independent</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the 90th percentile of the `amount` property for the entire dataset to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_percentile: s.globalPercentile(s.prop('amount'), 90)
  }
});</code></pre>

        <p class="code-caption">Assign the 90th percentile of the `amount` property for the entire dataset to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_percentile: globalPercentile($amount, 90)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalQuantiles"><span class="type-signature">(static) </span>globalQuantiles<span class="signature">(input, n)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the quantiles method with <code>n</code> buckets.</p>
<p>It will classify the input based on the entire dataset without filtering by viewport or by <code>filter</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The input expression used in the quantiles</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Number of buckets to be returned</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use global quantiles to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.globalQuantiles(s.prop('density'), 5), s.palettes.CB_REDS)
});</code></pre>

        <p class="code-caption">Use global quantiles to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(globalQuantiles($density, 5), CB_REDS)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalStandardDev"><span class="type-signature">(static) </span>globalStandardDev<span class="signature">(input, n, classSize<span class="signature-attributes">nullable</span>)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the Mean-Standard Deviation method with <code>n</code> buckets.</p>
<p>It will classify the input based on the entire dataset without filtering by viewport or by <code>filter</code>.</p>
<p>It uses average and standard deviation (population formula) to classify the dataset.
When using an odd number of buckets, the central class has a double size (classSize * 2), to honour the number of required buckets</p>
<p>This method is suitable if data are normally (or near normal) distributed, and it is specially
appropiated for diverging datasets, which can be well displayed using a diverging color scheme like TEALROSE</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The input expression to classify</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Number of buckets</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>classSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>Optional. The class size, defaults to 1.0 standard deviation (usual values are also 0.5 or 0.25)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use global mean-standard deviation to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.globalStandardDev(s.prop('density'), 5), s.palettes.TEALROSE)
});</code></pre>

        <p class="code-caption">Use global mean-standard deviation to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(globalStandardDev($density, 5), TEALROSE)
`);</code></pre>

        <p class="code-caption">Use global custom mean-standard deviation to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.globalStandardDev(s.prop('density'), 7, 0.5), s.palettes.TEALROSE)
});</code></pre>

        <p class="code-caption">Use global custom mean-standard deviation to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(globalStandardDev($density, 7, 0.5), TEALROSE)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".globalSum"><span class="type-signature">(static) </span>globalSum<span class="signature">(property)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the sum of the feature property for the entire source data.</p>
<p>Note: <code>globalSum</code> can only be created by <a href="carto.expressions.html#.prop">carto.expressions.prop</a>, not other expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>property expression of number type</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the global sum of the `amount` property to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     g_sum: s.globalSum(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the global sum of the `amount` property to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @g_sum: globalSum($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".gt"><span class="type-signature">(static) </span>gt<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is greater than y.</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price greater than 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.gt(s.prop('price'), 30)
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price greater than 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price > 30  // Equivalent to gt($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".gte"><span class="type-signature">(static) </span>gte<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is greater than or equal to y.</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price greater than or equal to 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.gte(s.prop('price'), 30)
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price greater than or equal to 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price >= 30  // Equivalent to gte($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".hex"><span class="type-signature">(static) </span>hex<span class="signature">(hexadecimalColor)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Create a color from its hexadecimal description.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>hexadecimalColor</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Color in the #RGB, #RGBA, #RRGGBB or #RRGGBBAA format</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.hex('#00F');  // Equivalent to `color: '#00F'`
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: #00F  // Equivalent to hex('#00F')
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".hsl"><span class="type-signature">(static) </span>hsl<span class="signature">(h, s, l)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a hsl color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>hue of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>saturation of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>l</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>lightness of the color in the [0, 1] range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.hsl(0.67, 1.0, 0.5)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: hsl(0.67, 1.0, 0.5)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".hsla"><span class="type-signature">(static) </span>hsla<span class="signature">(h, s, l, a)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a hsla color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>hue of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>saturation of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>l</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>lightness of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>alpha value of the color in the [0, 1] range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.hsla(0.67, 1.0, 0.5, 1.0)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: hsla(0.67, 1.0, 0.5, 1.0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".hsv"><span class="type-signature">(static) </span>hsv<span class="signature">(h, s, v)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a hsv color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>hue of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>saturation of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>v</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>value (brightness) of the color in the [0, 1] range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.hsv(0.67, 1.0, 1.0)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: hsv(0.67, 1.0, 1.0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".hsva"><span class="type-signature">(static) </span>hsva<span class="signature">(h, s, v, a)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a hsva color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>h</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>hue of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>s</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>saturation of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>v</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>value (brightness) of the color in the [0, 1] range</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>alpha value of the color in the [0, 1] range</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.hsva(0.67, 1.0, 1.0, 1.0)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: hsva(0.67, 1.0, 1.0, 1.0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".image"><span class="type-signature">(static) </span>image<span class="signature">(url)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Image. Load an image and use it as a symbol.</p>
<p>Note: image RGB color will be overridden if the viz <code>color</code> property is set.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Image path</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

















    <h5>Examples</h5>
    
        <p class="code-caption">Load a svg image.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  symbol: s.image('./marker.svg')
});</code></pre>

        <p class="code-caption">Load a svg image. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
   symbol: image('./marker.svg')
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".in"><span class="type-signature">(static) </span>in<span class="signature">(input, list)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Check if a categorical value belongs to a list of categories.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Categorical expression to be tested against the whitelist</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>list</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Category></span>


            
            </td>

            

            

            <td class="description last"><p>Multiple expression parameters that will form the whitelist</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression with the result of the check</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display only cities where $type is 'metropolis' or 'capital'.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.in(s.prop('type'), ['metropolis', 'capital'])
});</code></pre>

        <p class="code-caption">Display only cities where $type is 'metropolis' or 'capital'. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $type in ['metropolis', 'capital']
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".isNull"><span class="type-signature">(static) </span>isNull<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Check if a numerical or categorical property is missing (NULL value).</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to check</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Filter NULL values of the `numeric` property.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.not(s.isNull(s.prop('numeric')))
});</code></pre>

        <p class="code-caption">Filter NULL values of the `numeric` property. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: not(isNull($numeric))
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".linear"><span class="type-signature">(static) </span>linear<span class="signature">(input, min<span class="signature-attributes">opt</span>, max<span class="signature-attributes">opt</span>, max<span class="signature-attributes">opt</span>, samples)</span><span class="type-signature"> &rarr; {Number|Date}</span></h4>
    

    



<div class="description">
    <p>Linearly interpolates the value of a given input between a minimum and a maximum. If <code>min</code> and <code>max</code> are not defined they will
default to <code>globalMin(input)</code> and <code>globalMax(input)</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The input to be evaluated and interpolated, can be a numeric property or a date property</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>min</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    globalMin(input)
                
                </td>
            

            <td class="description last"><p>Numeric or date expression pointing to the lower limit</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>max</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    globalMax(input)
                
                </td>
            

            <td class="description last"><p>Numeric or date expression pointing to the higher limit</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>max</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    globalMax(input)
                
                </td>
            

            <td class="description last"><p>Numeric or date expression to set a timerange</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>samples</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Number of samples, which is 10 by default</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption"> Color by $speed using the CARTOColor Prism by assigning the first color in Prism to features with speeds of 10 or less, the last color in Prism to features with speeds of 100 or more and a interpolated value for the speeds in between.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.linear(s.prop('speed'), 10, 100), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption"> Color by $speed using the CARTOColor Prism by assigning the first color in Prism to features with speeds of 10 or less, the last color in Prism to features with speeds of 100 or more and a interpolated value for the speeds in between. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(linear($speed, 10, 100), PRISM)
`);</code></pre>

        <p class="code-caption"> Set custom number of samples.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.linear(s.prop('speed'), 10, 100, null, 10), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption"> Set custom number of samples. (String)</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz(`
  color: ramp(linear($speed, 10, 100, null, 10), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".list"><span class="type-signature">(static) </span>list<span class="signature">(elements)</span><span class="type-signature"> &rarr; {List|Transform}</span></h4>
    

    



<div class="description">
    <p>Wrapper around arrays. Explicit usage is unnecessary since CARTO VL will wrap implicitly all arrays using this function.</p>
<p>When used with Transformation expressions, the returned value will be a Transformation that will chain each single transformation one after another.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>elements</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Number></span>
|

<span class="param-type">Array.&lt;Category></span>
|

<span class="param-type">Array.&lt;Color></span>
|

<span class="param-type">Array.&lt;Date></span>
|

<span class="param-type">Array.&lt;Image></span>
|

<span class="param-type">Array.&lt;Transform></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">List</span>
|

<span class="param-type">Transform</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Rotate then translate.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  symbol: s.CROSS
  transform: [s.rotate(90), s.translate(10, 20)]
});</code></pre>

        <p class="code-caption">Rotate then translate. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  symbol: cross
  transform: [rotate(90), translate(10, 20)]
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".log"><span class="type-signature">(static) </span>log<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the natural logarithm (base e) of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the natural logarithm</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Natural Logarithm.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.log(10)  // 2.302585092994046
});</code></pre>

        <p class="code-caption">Natural Logarithm. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: log(10)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".lt"><span class="type-signature">(static) </span>lt<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is lower than y.</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price less than 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.lt(s.prop('price'), 30)
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price less than 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price &lt; 30  // Equivalent to lt($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".lte"><span class="type-signature">(static) </span>lte<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is lower than or equal to y.</p>
<p>This returns a numeric expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price less than or equal to 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.lte(s.prop('price'), 30)
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price less than or equal to 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price &lt;= 30  // Equivalent to lte($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".mod"><span class="type-signature">(static) </span>mod<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Modulus of two numeric expressions, mod returns a numeric expression with the value of x modulo y. This is computed as x - y * floor(x/y).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>First value of the modulus</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the modulus</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the modulus</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number modulus.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.mod(10, 6)  // 4
});</code></pre>

        <p class="code-caption">Number modulus. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 10 % 6  // Equivalent to mod(10, 6)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".mul"><span class="type-signature">(static) </span>mul<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number|Color}</span></h4>
    

    



<div class="description">
    <p>Multiply two numeric expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>First value to multiply</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>Second value to multiply</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the multiplication</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number multiplication.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.mul(5, 5)  // 25
});</code></pre>

        <p class="code-caption">Number multiplication. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 5 * 5  // Equivalent to mul(5, 5)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".namedColor"><span class="type-signature">(static) </span>namedColor<span class="signature">(name)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Create a color from its name.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the color</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.namedColor('blue')  // Equivalent to `color: 'blue'`
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: blue  // Equivalent to namedColor('blue')
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".neq"><span class="type-signature">(static) </span>neq<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compare if x is different than y.</p>
<p>This returns a number expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Firt value of the comparison</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the comparison</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the comparison: 0 or 1</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Compare two numbers to show only elements with price not equal to 30.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.neq(s.prop('price'), 30);
});</code></pre>

        <p class="code-caption">Compare two numbers to show only elements with price not equal to 30. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price != 30  // Equivalent to neq($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".nin"><span class="type-signature">(static) </span>nin<span class="signature">(input, list)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Check if value does not belong to the list of elements.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Categorical expression to be tested against the blacklist</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>list</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Category></span>


            
            </td>

            

            

            <td class="description last"><p>Multiple expression parameters that will form the blacklist</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression with the result of the check</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display only cities where $type is not 'metropolis' or 'capital'.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.nin(s.prop('type'), ['metropolis', 'capital'])
});</code></pre>

        <p class="code-caption">Display only cities where $type is not 'metropolis' or 'capital'. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $type nin ['metropolis', 'capital']
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".noOrder"><span class="type-signature">(static) </span>noOrder<span class="signature">()</span><span class="type-signature"> &rarr; {Order}</span></h4>
    

    



<div class="description">
    <p>No order expression.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Order</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">No order.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  order: s.noOrder()
});</code></pre>

        <p class="code-caption">No order. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  order: noOrder()
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".not"><span class="type-signature">(static) </span>not<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the logical negation of the given expression.
This is internally computed as 1 - x preserving boolean behavior and allowing fuzzy logic.</p>
<ul>
<li>When x is equal to 1 not(x) will be evaluated to 0</li>
<li>When x is equal to 0 not(x) will be evaluated to 1</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Number to compute the not value</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Not.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.not(0)  // 1
});</code></pre>

        <p class="code-caption">Not. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: not(0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".now"><span class="type-signature">(static) </span>now<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Get the current timestamp. This is an advanced form of animation, <code>animation</code> expression is preferred.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Update width during the time.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.mod(s.now(), 10)
});</code></pre>

        <p class="code-caption">Update width during the time. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: now() % 10
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".opacity"><span class="type-signature">(static) </span>opacity<span class="signature">(color, alpha)</span><span class="type-signature"> &rarr; {Color|Image}</span></h4>
    

    



<div class="description">
    <p>Override the input opacity.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>color</code></td>
            

            <td class="type">
            
                
<span class="param-type">Color</span>
|

<span class="param-type">Image</span>


            
            </td>

            

            

            <td class="description last"><p>Color or image expression to apply the opacity</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>alpha</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Number expression with the alpha (transparency) value</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>
|

<span class="param-type">Image</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points with 50% opacity.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.opacity(s.rgb(0,0,255), 0.5)  // Equivalent to `s.rgba(0,0,255,0.5)`
});</code></pre>

        <p class="code-caption">Display blue points with 50% opacity. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: opacity(rgb(0,0,255), 0.5) // Equivalent to `rgba(0,0,255,0.5)`
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".or"><span class="type-signature">(static) </span>or<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Perform a binary OR between two numeric expressions.
If the numbers are different from 0 or 1 this performs a <a href="https://en.wikipedia.org/wiki/Fuzzy_logic#Fuzzification">fuzzy or operation</a>.
This fuzzy behavior will allow transitions to work in a continuos, non-discrete, fashion.</p>
<p>This returns a number expression where 0 means <code>false</code> and 1 means <code>true</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>First value of the expression</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Second value of the expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the expression</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Show only elements with price < 30 OR price > 1000.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.or(
    s.lt(s.prop('price'), 30),
    s.gt(s.prop('price'), 1000)
  )
});</code></pre>

        <p class="code-caption">Show only elements with price < 30 OR price > 1000. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: $price &lt; 30 or $price > 1000  // Equivalent to or(lt($price, 30), gt($price, 1000))
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".placement"><span class="type-signature">(static) </span>placement<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Placement}</span></h4>
    

    



<div class="description">
    <p>Placement. Define an image offset relative to its size. Where:</p>
<ul>
<li><code>symbolPlacement: placement(1,1)</code> means to align the bottom left corner of the image with the point center.</li>
<li><code>symbolPlacement: placement(0,0)</code> means to align the center of the image with the point center.</li>
<li><code>symbolPlacement: placement(-1,-1)</code> means to align the top right corner of the image with the point center.</li>
</ul>
<pre class="prettyprint source"><code>          |1
          |
          |
-1 -------+------- 1
          |
          |
        -1|</code></pre><p>You can also use <code>align_center</code> and <code>align_bottom</code> to set the simbol placement as follows:</p>
<ul>
<li><code>symbolPlacement: align_bottom</code> is equivalent to <code>symbolPlacement: placement(0, 1)</code></li>
<li><code>symbolPlacement: align_center</code> is equivalent to <code>symbolPlacement: placement(0, 0)</code></li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>first numeric expression that indicates the image offset in the X direction.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>second numeric expression that indicates the image offset in the Y direction.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Placement</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Setting the aligment to the top corner of the image.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  symbol: s.image('./marker.svg').
  symbolPlacement: s.placement(1, 0)
});</code></pre>

        <p class="code-caption">Setting the aligment to the top corner of the image. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  symbol: image('./marker.svg')
  symbolPlacement: placement(1, 0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".pow"><span class="type-signature">(static) </span>pow<span class="signature">(base, exponent)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the base to the exponent power, return a numeric expression with the value of the first parameter raised to the power of the second.
The result is undefined if x&lt;0 or if x=0 and y≤0.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>base</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Base of the power</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>exponent</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Exponent of the power</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the power</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number power.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.pow(2, 3)  // 8
});</code></pre>

        <p class="code-caption">Number power. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 2 ^ 3  // Equivalent to pow(2, 3)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".prop"><span class="type-signature">(static) </span>prop<span class="signature">(name)</span><span class="type-signature"> &rarr; {Number|Category|Date}</span></h4>
    

    



<div class="description">
    <p>Evaluates the value of a column for every row in the dataset.</p>
<p>For example think about a dataset containing 3 cities: Barcelona, Paris and London.
The <code>prop('name')</code> will return the name of the current city for every point in the dataset.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The property in the dataset that is going to be evaluated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>
|

<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display only cities with name different from "London".</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
 filter: s.neq(s.prop('name'), 'london')
});</code></pre>

        <p class="code-caption">Display only cities with name different from "London". (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: neq(prop('name'), 'london')
`);

const viz = new carto.Viz(`
  filter: $name != 'london'
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".ramp"><span class="type-signature">(static) </span>ramp<span class="signature">(input, palette, others<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Number|Color|Image}</span></h4>
    

    



<div class="description">
    <p>Create a ramp: a mapping between an input (numeric or categorical) and an output (number, colors and/or images)</p>
<p>When the input has the same number of categories (without taking the &quot;others&quot; category into account).
Then, each input category will have a one to one match with an output value.</p>
<p>Some case examples:
<code>ramp(buckets($product, ['A, 'B', 'C']), [house, car, bus])</code>
<code>ramp(buckets($price, [20, 50, 120]), [1, 10, 4, 12])</code>
<code>ramp(top($product, 3), [blue, yellow, green])</code>
<code>ramp(globalQuantiles($price, 3), [red, yellow, green])</code></p>
<p>When the input has different number of categories or the input is a linear expression.
Then it will interpolate the output values (Note: this is not supported if output values are images)</p>
<p>Some case examples:
<code>ramp(linear($price, 1, 10) [green, yellow, red])</code>
`ramp(buckets($product, ['A, 'B', 'C'], [red, blue]))</p>
<ul>
<li>When the input is a categorical property, we wrap it automatically in a CategoryIndex expression
<code>ramp($product, Prism)</code> (equivalent to <code>ramp($categoryIndex($product)), Prism)</code></li>
<li>When the input is a numeric property, we wrap it automatically in a Linear expression.
<code>ramp($price, Prism)</code> (equivalent to <code>ramp($linear($price)), Prism)</code></li>
</ul>
<p>The &quot;others&quot; value is setted by default, depending on the output type:</p>
<ul>
<li>If it is &quot;Number&quot;, the &quot;others&quot; value is 1.</li>
<li>If it is &quot;Color&quot; from a color array (i.e: [red, yellow, green]), the &quot;others&quot; value is the gray color.</li>
<li>If it is &quot;Color&quot; from a cartocolor palette (i.e: Prism), the &quot;others&quot; value is the last color of the palette.</li>
<li>If it is &quot;Image&quot;, the &quot;others&quot; value is a circle.</li>
</ul>
<p>If we add a third parameter, the &quot;others&quot; default value will be overridden by this one</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The input expression to give a color</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>palette</code></td>
            

            <td class="type">
            
                
<span class="param-type">Palette</span>
|

<span class="param-type">Array.&lt;Color></span>
|

<span class="param-type">Array.&lt;Number></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The color palette that is going to be used</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>others</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>
|

<span class="param-type">Image</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Value that overrides the default value for &quot;others&quot;</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>
|

<span class="param-type">Image</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Mapping categories to numbers, colors and images.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.ramp(s.buckets(s.prop('product'), ['A, 'B', 'C']), [1, 2, 3])
  color: s.ramp(s.buckets(s.prop('product'), ['A, 'B', 'C']), s.palettes.PRISM)
  strokeColor: s.ramp(s.buckets(s.prop('product'), ['A, 'B', 'C']), [s.namedColor('red'), s.namedColor('yellow'), s.namedColor('green')])
  symbol: s.ramp(s.buckets(s.prop('product'), ['A, 'B', 'C']), [s.HOUSE, s.CAR, s.BUS])
});</code></pre>

        <p class="code-caption">Mapping categories to numbers, colors and images. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: ramp(buckets($product), ['A, 'B', 'C']), [1, 2, 3])
  color: ramp(buckets($product), ['A, 'B', 'C']), Prism)
  strokeColor: ramp(buckets($product), ['A, 'B', 'C']), [red, yellow, green])
  symbol: ramp(buckets($product), ['A, 'B', 'C']), [house, car, bus])
`);</code></pre>

        <p class="code-caption">Mapping classified numeric properties to numbers, colors and images.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.ramp(s.buckets(s.prop('price'), [40, 100]), [1, 2, 3])
  color: s.ramp(s.buckets(s.prop('price'), [40, 100]), s.palettes.PRISM)
  strokeColor: s.ramp(s.buckets(s.prop('price'), [40, 100]), [s.namedColor('red'), s.namedColor('yellow'), s.namedColor(green)])
  symbol: s.ramp(s.buckets(s.prop('price'), [40, 100]), [s.HOUSE), s.CAR, s.BUS])
});</code></pre>

        <p class="code-caption">Mapping classified numeric properties to numbers, colors and images. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: ramp(buckets($price, [40, 100]), [1, 2, 3])
  color: ramp(buckets($price, [40, 100]), Prism)
  strokeColor: ramp(buckets($price, [40, 100]), [red, yellow, green])
  symbol: ramp(buckets($price, [40, 100]), [house, car, bus])
`);</code></pre>

        <p class="code-caption">Override default values.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.ramp(s.top(s.prop('price'), 3), [1, 2, 3], 0)
  strokeColor: s.ramp(s.top(s.prop('price'), 3), Prism, s.namedColor('red'))
  color: s.ramp(s.top(s.prop('price'), 3), [s.namedColor('blue'), s.namedColor('red'), s.namedColor('yellow')], s.namedColor(black))
  symbol: s.ramp(s.top(s.prop('price'), 3), [s.HOUSE, s.CAR, s.BUS], s.CROSS)
});</code></pre>

        <p class="code-caption">Override default values. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: ramp(top($price, 3), [1, 2, 3], 0)
  strokeColor: ramp(top($price, 3), Prism, red)
  color: ramp(top($price, 3), [blue, red, yellow], black)
  symbol: ramp(top($price, 3), [house, car, bus], cross)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".reverse"><span class="type-signature">(static) </span>reverse<span class="signature">(input)</span><span class="type-signature"> &rarr; {Palette|List}</span></h4>
    

    



<div class="description">
    <p>Reverse the provided item.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Palette</span>
|

<span class="param-type">List</span>


            
            </td>

            

            

            <td class="description last"><p>item to be reversed</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Palette</span>
|

<span class="param-type">List</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Invert a Palette.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.prop('type'), s.reverse(s.palettes.PRISM));
});</code></pre>

        <p class="code-caption">Invert a Palette (String).</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp($type, reverse(PRISM))
`);</code></pre>

        <p class="code-caption">Invert a List.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.prop('count'), s.reverse([s.namedColor('red'), s.namedColor('blue')]));
});</code></pre>

        <p class="code-caption">Invert a List (String).</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp($count, reverse([red, blue]))
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".rgb"><span class="type-signature">(static) </span>rgb<span class="signature">(r, g, b)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a rgb color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>r</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of red in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>g</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of green in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>b</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of blue in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.rgb(0, 0, 255)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: rgb(0, 0, 255)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".rgba"><span class="type-signature">(static) </span>rgba<span class="signature">(r, g, b, a)</span><span class="type-signature"> &rarr; {Color}</span></h4>
    

    



<div class="description">
    <p>Evaluates to a rgba color.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>r</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of red in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>g</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of green in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>b</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The amount of blue in the color in the [0, 255] range. Numeric expression.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The alpha value of the color in the [0, 1] range. Numeric expression.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Display blue points.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.rgba(0, 0, 255, 1)
});</code></pre>

        <p class="code-caption">Display blue points. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: rgba(0, 0, 255, 1)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".rotate"><span class="type-signature">(static) </span>rotate<span class="signature">(angle)</span><span class="type-signature"> &rarr; {Transform}</span></h4>
    

    



<div class="description">
    <p>Rotate. Define a rotation in degrees.</p>
<p>Limitation: only supported in combination with <code>symbol:</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>angle</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>angle to rotate in degrees in clockwise direction</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Transform</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Rotate 30 degrees in clockwise direction.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  symbol: s.CROSS
  transform: s.rotate(30)
});</code></pre>

        <p class="code-caption">Rotate 30 degrees in clockwise direction. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  symbol: cross
  transform: rotate(30)
`);</code></pre>

        <p class="code-caption">Rotate 30 degrees in counter-clockwise direction.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  symbol: s.CROSS
  transform: s.rotate(-30)
});</code></pre>

        <p class="code-caption">Rotate 30 degrees in counter-clockwise direction. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  symbol: cross
  transform: rotate(-30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".scaled"><span class="type-signature">(static) </span>scaled<span class="signature">(width, zoomlevel<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Scale a width value to keep feature width constant in real space (meters).
This will change the width in pixels at different zoom levels to enforce the previous condition.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>pixel width at zoom level <code>zoomlevel</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>zoomlevel</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last"><p>zoomlevel at which <code>width</code> is relative to</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Keep feature width in meters constant with 25 pixels at zoom level 7.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.scaled(25, 7)
});</code></pre>

        <p class="code-caption">Keep feature width in meters constant with 25 pixels at zoom level 7. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: s.scaled(25, 7)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".sign"><span class="type-signature">(static) </span>sign<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the sign of a number x, indicating whether the number is positive, negative or zero
This means this function will return 1 if the number is positive, -1 if the number is negative
0 if the number is 0 and -0 if the number is -0.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the sign</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Sign.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.sign(100)  // 1
});</code></pre>

        <p class="code-caption">Sign. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: sign(100)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".sin"><span class="type-signature">(static) </span>sin<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the sine of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the sine in radians</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Sin.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.sin(Math.PI/2)  // 1
});</code></pre>

        <p class="code-caption">Sin. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: sin(PI/2)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".sqrt"><span class="type-signature">(static) </span>sqrt<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the square root of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the square root</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Square root.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.sqrt(4)  // 2
});</code></pre>

        <p class="code-caption">Square root. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: sqrt(4)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".sub"><span class="type-signature">(static) </span>sub<span class="signature">(minuend, subtrahend)</span><span class="type-signature"> &rarr; {Number|Color}</span></h4>
    

    



<div class="description">
    <p>Substract two numeric expressions.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minuend</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>The minuend of the subtraction</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subtrahend</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


            
            </td>

            

            

            <td class="description last"><p>The subtrahend of the subtraction</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the substraction</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Color</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Number subtraction.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.sub(10, 2)  // 8
});</code></pre>

        <p class="code-caption">Number subtraction. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: 10 - 2  // Equivalent to sub(10, 2)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".tan"><span class="type-signature">(static) </span>tan<span class="signature">(x)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Compute the tangent of a number x.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression to compute the tangent in radians</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Tan.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.tan(0)  // 0
});</code></pre>

        <p class="code-caption">Tan. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: tan(0)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".time"><span class="type-signature">(static) </span>time<span class="signature">(date)</span><span class="type-signature"> &rarr; {Date}</span></h4>
    

    



<div class="description">
    <p>Time constant expression</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>date</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>
|

<span class="param-type">string</span>
|

<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The date from a JavaScript Date() object or a date encoded as a string or the number of milliseconds since Epoch.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Filter by a date between dates.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.between(s.prop('date'), s.time('2022-03-09T00:00:00Z'), s.time('2033-08-12T00:00:00Z')
});</code></pre>

        <p class="code-caption">Filter by a date between dates. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: time('2022-03-09T00:00:00Z') &lt; $date &lt; time('2033-08-12T00:00:00Z')
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".timeRange"><span class="type-signature">(static) </span>timeRange<span class="signature">(value)</span><span class="type-signature"> &rarr; {TimeRange}</span></h4>
    

    



<div class="description">
    <p>Define a time range: an interval between two time points.</p>
<p>ISO-formatted strings (based on ISO 8601) are used to define ranges.
Since <code>timeRange</code> doesn't support arbitrary intervals, but only
intervals based on single units of time (e.g. a month, an hour),
we don't use the general ISO interval format, but simply an
abbreviated form of the date point format, so that '2018-03' represents
the month of March, 2018 (i.e. the interval 2018-03-01T00:00:00/2018-04-01T00:00:00).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>abbreviated ISO-formatted interval</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>It retuns a TimeRange object.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">TimeRange</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".top"><span class="type-signature">(static) </span>top<span class="signature">(property, n, othersLabel)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Get the top <code>n</code> properties, aggregating the rest into an &quot;others&quot; bucket category. The &quot;others&quot; label is by default CARTO_VL_OTHERS.
This can be overwriten by setting the &quot;others&quot; label as the third parameter.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>property</code></td>
            

            <td class="type">
            
                
<span class="param-type">Category</span>


            
            </td>

            

            

            <td class="description last"><p>Column of the table</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Number of top properties to be returned, the maximum value is 16, values higher than that will result in an error</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>othersLabel</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Custom label for &quot;others&quot;</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use top 3 categories to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.top(s.prop('category'), 3), s.palettes.VIVID)
});</code></pre>

        <p class="code-caption">Use top 3 categories to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(top($category, 3), VIVID)
`);</code></pre>

        <p class="code-caption">Set custom "others" label.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.top(s.prop('category'), 3, 'Others'), s.palettes.VIVID)
});</code></pre>

        <p class="code-caption">Set custom "others" label. (String)</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz(`
  color: ramp(top($category, 3, 'Others'), VIVID)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".transition"><span class="type-signature">(static) </span>transition<span class="signature">(duration)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Transition returns a number from zero to one based on the elapsed number of milliseconds since the viz was instantiated.
The animation is not cyclic. It will stick to one once the elapsed number of milliseconds reach the animation's duration.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>duration</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Animation duration in milliseconds</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".translate"><span class="type-signature">(static) </span>translate<span class="signature">(x, y)</span><span class="type-signature"> &rarr; {Translate}</span></h4>
    

    



<div class="description">
    <p>Translate. Define a translation:</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>first numeric expression that indicates the translation in the X direction.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>second numeric expression that indicates the translation in the Y direction.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Numeric expression</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Translate</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Apply an x, y translation</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  transform: s.translate(10, 20)
});</code></pre>

        <p class="code-caption">Apply an x, y translation. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  transform: translate(10, 20)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".var"><span class="type-signature">(static) </span>var<span class="signature">(name)</span><span class="type-signature"> &rarr; {Number|Category|Color|Date}</span></h4>
    

    



<div class="description">
    <p>Alias to a named variable defined in the Viz.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The variable name that is going to be evaluated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>
|

<span class="param-type">Category</span>
|

<span class="param-type">Color</span>
|

<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>&lt;caption>&lt;/caption>
const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
    sum_price: s.clusterSum(s.prop('price'))
  }
 filter: s.neq(s.var('sum_price'), 'london')
});</code></pre>

        <p class="code-caption">(String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @sum_price: clusterSum($price)
  filter: $price == 30  // Equivalent to eq($price, 30)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportAvg"><span class="type-signature">(static) </span>viewportAvg<span class="signature">(input)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the average value of an expression for the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the average of the `amount` property in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_avg: s.viewportAvg(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the average of the `amount` property in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_avg: viewportAvg($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportCount"><span class="type-signature">(static) </span>viewportCount<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the feature count of the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>feature count in the viewport</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the feature count in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_count: s.viewportCount()
  }
});</code></pre>

        <p class="code-caption">Assign the feature count in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_count: viewportCount()
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportEqIntervals"><span class="type-signature">(static) </span>viewportEqIntervals<span class="signature">(input, n)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the equal intervals method with <code>n</code> buckets.</p>
<p>It will classify the input based on the filtered dataset, filtering by viewport and by <code>filter</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>The input expression to classify</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Number of buckets</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use viewport equal intervals to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.viewportEqIntervals(s.prop('density'), 5), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption">Use viewport equal intervals to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(viewportEqIntervals($density, 5), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportFeatures"><span class="type-signature">(static) </span>viewportFeatures<span class="signature">(&hellip;properties)</span><span class="type-signature"> &rarr; {ViewportFeatures}</span></h4>
    

    



<div class="description">
    <p>Generates a list of features in the viewport</p>
<p>For each feature, the properties specified as arguments to this expression will be available.
Filtered features will not be present in the list.
This expression cannot be used for rendering, it can only be used in JavaScript code as in the example below.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>properties</code></td>
            

            <td class="type">
            
                
<span class="param-type">Property</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last"><p>properties that will appear in the feature list</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>ViewportFeatures</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">ViewportFeatures</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Define and use a list of features.</p>
    
    <pre class="prettyprint"><code>const source = carto.source.Dataset('data');
const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
    list: s.viewportFeatures(s.prop('value'), s.prop('category'))
  }
});
const layer = carto.Layer('layer', source, viz);
...
layer.on('updated', () => {
  viz.variables.list.value.forEach(feature => {
    console.log('value:', feature.value, 'category:', feature.category);
  });
});</code></pre>

        <p class="code-caption">Define and use a list of features. (String)</p>
    
    <pre class="prettyprint"><code>const source = carto.source.Dataset('data');
const viz = new carto.Viz(`
  @list: viewportFeatures($value, $category)
`);
const layer = carto.Layer('layer', source, viz);
...
layer.on('updated', () => {
  viz.variables.list.value.forEach(feature => {
    console.log('value:', feature.value, 'category:', feature.category);
  });
});</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportHistogram"><span class="type-signature">(static) </span>viewportHistogram<span class="signature">(input, sizeOrBuckets, weight)</span><span class="type-signature"> &rarr; {ViewportHistogram}</span></h4>
    

    



<div class="description">
    <p>Generates a histogram based on the data from the features present in the viewport.</p>
<p>The histogram can be based on a categorical expression, in which case each category will correspond to a histogram bar.</p>
<p>The histogram can be based on a numeric expression, the buckets for the histogram is controllable through the <code>sizeOrBuckets</code> parameter.
For numeric values of sizeOrBuckets, the minimum and maximum will be computed automatically and bars will be generated at regular intervals between the minimum and maximum.
When providing sizeOrBuckets as a list of buckets, the values will get assigned to the first bucket matching the criteria [bucketMin &lt;= value &lt; bucketMax].</p>
<p>The viewportHistogram can also be combined with the <code>top()</code> expression.</p>
<p>Histograms are useful to get insights and create widgets outside the scope of CARTO VL, see the following example for more info.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>expression to base the histogram</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sizeOrBuckets</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>Optional (defaults to 20). Number of bars to use if <code>x</code> is a numeric expression; or user-defined buckets for numeric expressions.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>weight</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Optional. Weight each occurrence differently based on this weight, defaults to <code>1</code>, which will generate a simple, non-weighted count.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>ViewportHistogram</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">ViewportHistogram</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Create and use an histogram.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz(
    variables: {
      categoryHistogram: s.viewportHistogram(s.prop('type')),
      numericHistogram: s.viewportHistogram(s.prop('amount'), 3, 1),
      userDefinedHistogram: s.viewportHistogram(s.prop('amount', [[0, 10], [10, 20], [20, 30]], 1),
      topCategoryHistogram: s.viewportHistogram(s.top(s.prop('type'), 3))
    }
);
// ...
console.log(viz.variables.categoryHistogram.value);
// [{x: 'typeA', y: 10}, {x: 'typeB', y: 20}]
// There are 10 features of type A and 20 of type B

console.log(viz.variables.numericHistogram.value);
// [{x: [0,10],  y: 20}, {x: [10,20],  y: 7}, {x: [20, 30], y: 3}]
// There are 20 features with an amount between 0 and 10, 7 features with an amount between 10 and 20, and 3 features with an amount between 20 and 30</code></pre>

        <p class="code-caption">Create and use an histogram. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
   @categoryHistogram:    viewportHistogram($type)
   @numericHistogram:     viewportHistogram($amount, 3, 1)
   @userDefinedHistogram: viewportHistogram($amount, [[0, 10], [10, 20], [20, 30]], 1)
   @topCategoryHistogram: viewportHistogram(top($type, 3))
`);
// ...
console.log(viz.variables.categoryHistogram.value);
// [{x: 'typeA', y: 10}, {x: 'typeB', y: 20}]
// There are 10 features of type A and 20 of type B

console.log(viz.variables.numericHistogram.value);
// [{x: [0,10],  y: 20}, {x: [10,20],  y: 7}, {x: [20, 30], y: 3}]
// There are 20 features with an amount between 0 and 10, 7 features with an amount between 10 and 20, and 3 features with an amount between 20 and 30</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportMax"><span class="type-signature">(static) </span>viewportMax<span class="signature">(input)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the maximum value of an expression for the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the maximum of the `amount` property in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_max: s.viewportMax(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the maximum of the `amount` property in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_max: viewportMax($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportMin"><span class="type-signature">(static) </span>viewportMin<span class="signature">(input)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the minimum value of an expression for the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the minimum of the `amount` property in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_min: s.viewportMin(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the minimum of the `amount` property in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_min: viewportMin($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportPercentile"><span class="type-signature">(static) </span>viewportPercentile<span class="signature">(input, percentile)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the Nth percentile of an expression for the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>percentile</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Numeric expression [0, 100]</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the percentile of the `amount` property in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_percentile: s.viewportPercentile(s.prop('amount'), 90)
  }
});</code></pre>

        <p class="code-caption">Assign the percentile of the `amount` property in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_percentile: viewportPercentile($amount, 90)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportQuantiles"><span class="type-signature">(static) </span>viewportQuantiles<span class="signature">(input, n, histogramSize<span class="signature-attributes">nullable</span>)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the quantiles method with <code>n</code> buckets.</p>
<p>It will classify the input based on the filtered dataset, filtering by viewport and by <code>filter</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The input expression used in the quantiles</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Number of buckets to be returned</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>histogramSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>Optional (DEFAULT_HISTOGRAM_SIZE = 1000).  Histogram 'size' used for calculations (the bigger, the more precision)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use viewportQuantiles to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.viewportQuantiles(s.prop('density'), 5), s.palettes.PRISM)
});</code></pre>

        <p class="code-caption">Use viewportQuantiles to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(viewportQuantiles($density, 5), PRISM)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportStandardDev"><span class="type-signature">(static) </span>viewportStandardDev<span class="signature">(input, n, classSize<span class="signature-attributes">nullable</span>, histogramSize<span class="signature-attributes">nullable</span>)</span><span class="type-signature"> &rarr; {Category}</span></h4>
    

    



<div class="description">
    <p>Classify <code>input</code> by using the Mean-Standard Deviation method with <code>n</code> buckets.</p>
<p>It will classify the input based on the filtered dataset, filtering by viewport and by <code>filter</code>.</p>
<p>It uses average and standard deviation (population formula) to classify the dataset.
When using an odd number of buckets, the central class has a double size (classSize * 2), to honour the number of required buckets</p>
<p>This method is suitable if data are normally (or near normal) distributed, and it is specially
appropiated for diverging datasets, which can be well displayed using a diverging color scheme like TEALROSE</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The input expression to classify</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>n</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>Number of buckets</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>classSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>Optional. The class size, defaults to 1.0 standard deviation (usual values are also 0.5 or 0.25)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>histogramSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                
                    &lt;nullable><br>
                

                
                </td>
            

            

            <td class="description last"><p>Optional (DEFAULT_HISTOGRAM_SIZE = 1000).  Histogram 'size' used for calculations (the bigger, the more precision)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Category</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Use viewport mean-standard deviation to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.viewportStandardDev(s.prop('density'), 5), s.palettes.TEALROSE)
});</code></pre>

        <p class="code-caption">Use viewport mean-standard deviation to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(viewportStandardDev($density, 5), tealrose)
`);</code></pre>

        <p class="code-caption">Use viewport custom mean-standard deviation to define a color ramp.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  color: s.ramp(s.viewportStandardDev(s.prop('density'), 7, 0.5), s.palettes.TEALROSE)
});</code></pre>

        <p class="code-caption">Use viewport custom mean-standard deviation to define a color ramp. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  color: ramp(viewportStandardDev($density, 7, 0.5), tealrose)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".viewportSum"><span class="type-signature">(static) </span>viewportSum<span class="signature">(input)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Return the sum of an expression for the features showed in the viewport (features outside the viewport and features that don't pass the filter will be excluded).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>numeric expression</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result of the aggregation</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Assign the sum of the `amount` property in the viewport to a variable.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  variables: {
     v_sum: s.viewportSum(s.prop('amount'))
  }
});</code></pre>

        <p class="code-caption">Assign the sum of the `amount` property in the viewport to a variable. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  @v_sum: viewportSum($amount)
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".width"><span class="type-signature">(static) </span>width<span class="signature">()</span><span class="type-signature"> &rarr; {carto.expressions.Width}</span></h4>
    

    



<div class="description">
    <p>Return the expression assigned in the <code>width</code> property. ONLY usable in an <code>order:</code> property.</p>
<p>Note: ordering expressions won't assure a perfect ordering.
Features will be distributed in different buckets with the original order, and those buckets will be ordered.
This guarantees a maximum error, but not a perfect order.
For most operations this is imperceptible, but usage of <code>order</code> in combination with animation or multi-scale expressions (<code>zoomrange</code> and <code>scaled</code>)
may result in artifacts.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">carto.expressions.Width</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Ascending order based on width.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  order: s.asc(s.width())
});</code></pre>

        <p class="code-caption">Ascending order based on width. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  order: asc(width())
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".zoom"><span class="type-signature">(static) </span>zoom<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Get the current zoom level.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Only show feature at zoom levels less than 7.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  filter: s.lt(s.zoom(), 7)
});</code></pre>

        <p class="code-caption">Only show feature at zoom levels less than 7. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  filter: zoom() &lt; 7
`);</code></pre>



        
            

    

    
    <h4 class="name" id=".zoomrange"><span class="type-signature">(static) </span>zoomrange<span class="signature">(_zoomBreakpointList)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Define a list of interpolated zoom ranges based on an input breakpoint list. Useful in combination with ramp (see examples).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>_zoomBreakpointList</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Number></span>


            
            </td>

            

            

            <td class="description last"><p>list of zoom breakpoints with at least two elements</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
        <p class="code-caption">Set the width to 1 at zoom levels < 7, set the width at 20 at zoom levels > 10, interpolate between 1 and 20 at zoom levels in the [7,10] range.</p>
    
    <pre class="prettyprint"><code>const s = carto.expressions;
const viz = new carto.Viz({
  width: s.ramp(s.zoomrange([7, 10]), [1, 20])
});</code></pre>

        <p class="code-caption">Set the width to 1 at zoom levels < 7, set the width at 20 at zoom levels > 10, interpolate between 1 and 20 at zoom levels in the [7,10] range. (String)</p>
    
    <pre class="prettyprint"><code>const viz = new carto.Viz(`
  width: width: ramp(zoomrange([7, 10]), [1, 20])
`);</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="carto.Interactivity.html">carto.Interactivity</a></li><li><a href="carto.Layer.html">carto.Layer</a></li><li><a href="carto.TimeRange.html">carto.TimeRange</a></li><li><a href="carto.Viz.html">carto.Viz</a></li><li><a href="Expression.html">Expression</a></li><li><a href="expressions.Animation.html">expressions.Animation</a></li><li><a href="expressions.GlobalHistogram.html">expressions.GlobalHistogram</a></li><li><a href="expressions.Ramp.html">expressions.Ramp</a></li><li><a href="expressions.ViewportHistogram.html">expressions.ViewportHistogram</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:CartoError">CartoError</a></li><li><a href="global.html#event:featureClick">featureClick</a></li><li><a href="global.html#event:featureClickOut">featureClickOut</a></li><li><a href="global.html#event:featureEnter">featureEnter</a></li><li><a href="global.html#event:featureHover">featureHover</a></li><li><a href="global.html#event:featureLeave">featureLeave</a></li></ul><h3>Namespaces</h3><ul><li><a href="carto.html">carto</a></li><li><a href="carto.basemaps.html">carto.basemaps</a></li><li><a href="carto.expressions.html">carto.expressions</a></li><li><a href="carto.source.html">carto.source</a></li><li><a href="CartoErrors.html">CartoErrors</a></li><li><a href="Constants.html">Constants</a></li><li><a href="Features.html">Features</a></li><li><a href="Icons.html">Icons</a></li><li><a href="Types.html">Types</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jun 17 2019 16:14:04 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>